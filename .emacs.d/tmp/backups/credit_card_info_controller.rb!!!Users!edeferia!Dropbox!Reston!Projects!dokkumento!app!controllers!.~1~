class BraintreeInterfaceController < AlexandriaCloudController
  before_filter :load_braintree_service
 #
 # Stands up the minimally created data for the transparent transaction
 # to create a customer with credit card information. We are using the
 # transparent redirect approach so that the customer's credit card
 # never goes through our servers. This avoids any leakage created by
 # rails logging.
 #
 def new
     @tr_data = Braintree::TransparentRedirect.create_customer_data(
                     :redirect_url => user_braintree_confirm_url,
                     :customer => {
                      :company => current_organization.id
                     })
 end

 def  create_customer
  member = Member.find(params[:member_id])
  @braintree_service.create_customer(member)
 end

 def confirm_customer_created

 end

protected
  def load_braintree_service( service = BraintreeService.new )
     @braintree_service ||= service
  end

end
