define(function(require) {
  'use strict';

  var Backbone = require('backbone');
  var token = require('js/utils/token');
  var api = require('js/utils/api');

  return Backbone.Model.extend({

    login: function(username, password) {
      var data = {
        username: username,
        password: password
      };

      console.log('token has value: %o', token);

      return api.post('/auth/login', data)
        .then(function(results) {
          token.set(results.token);
        });
    }

  });

});
